



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Wiki for the D3A by Grid Singularity">
      
      
        <link rel="canonical" href="https://gridsingularity.github.io/d3a/d3a-documentation/percentage-fees/">
      
      
        <meta name="author" content="Grid Singularity">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/d3a-favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.2">
    
    
      
        <title>Percentage fees - D3A Wiki</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.982221ab.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"PT Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#configuration-model" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://gridsingularity.github.io/d3a/d3a-documentation/" title="D3A Wiki" class="md-header-nav__button md-logo">
          
            <img src="../img/d3a-logo.png" width="32" height="32">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              D3A Wiki
            </span>
            <span class="md-header-nav__topic">
              Percentage fees
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/gridsingularity/d3a/wiki/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    D3A on github
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://gridsingularity.github.io/d3a/d3a-documentation/" title="D3A Wiki" class="md-nav__button md-logo">
      
        <img src="../img/d3a-logo.png" width="48" height="48">
      
    </a>
    D3A Wiki
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/gridsingularity/d3a/wiki/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    D3A on github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../d3a-documentation/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      User Interface (d3a.io)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        User Interface (d3a.io)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../user-interface-d3a/" title="UI Overview" class="md-nav__link">
      UI Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ui-releases/" title="Releases" class="md-nav__link">
      Releases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../projects-home-page/" title="Projects (Home Page)" class="md-nav__link">
      Projects (Home Page)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Simulation Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Simulation Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../simulation-configuration/" title="Simulation Configuration Overview" class="md-nav__link">
      Simulation Configuration Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../general-settings/" title="General Settings" class="md-nav__link">
      General Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4-3" type="checkbox" id="nav-2-4-3">
    
    <label class="md-nav__link" for="nav-2-4-3">
      Grid Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-4-3">
        Grid Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../grid-setup/" title="Initial Grid Setup" class="md-nav__link">
      Initial Grid Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pv/" title="PV" class="md-nav__link">
      PV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../storage/" title="Storage" class="md-nav__link">
      Storage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../load/" title="Load" class="md-nav__link">
      Load
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../market-maker/" title="Market Maker" class="md-nav__link">
      Market Maker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../power-plant/" title="Power Plant" class="md-nav__link">
      Power Plant
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../areas/" title="Areas" class="md-nav__link">
      Areas
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../libraries/" title="Libraries" class="md-nav__link">
      Libraries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upload-file-formats/" title="Upload File Formats" class="md-nav__link">
      Upload File Formats
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../results/" title="Results" class="md-nav__link">
      Results
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Backend Codebase
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Backend Codebase
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../backend-codebase/" title="Backend Codebase Overview" class="md-nav__link">
      Backend Codebase Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Strategies
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Strategies
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../load-strategy/" title="Load Strategy" class="md-nav__link">
      Load Strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ess-strategy/" title="Energy Storage System (ESS) Strategy" class="md-nav__link">
      Energy Storage System (ESS) Strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pv-strategy/" title="PV Strategy" class="md-nav__link">
      PV Strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../infinite-power-plant-strategy/" title="Infinite Power Plant Strategy" class="md-nav__link">
      Infinite Power Plant Strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom-load-strategy/" title="Custom Load Strategy" class="md-nav__link">
      Custom Load Strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../finite-power-plant-strategy/" title="Finite Power Plant Strategy" class="md-nav__link">
      Finite Power Plant Strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom-pv-strategy/" title="Custom PV Strategy" class="md-nav__link">
      Custom PV Strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../infinite-bus-strategy/" title="Infinite Bus Strategy" class="md-nav__link">
      Infinite Bus Strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../how-implement-custom-device-strategies/" title="How to Implement Custom Device Strategies" class="md-nav__link">
      How to Implement Custom Device Strategies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../market-maker-strategy/" title="Market Maker Strategy" class="md-nav__link">
      Market Maker Strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../how-strategies-adjust-prices/" title="How Strategies Adjust the Prices of Offers and Bids" class="md-nav__link">
      How Strategies Adjust the Prices of Offers and Bids
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3" checked>
    
    <label class="md-nav__link" for="nav-3-3">
      Markets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Markets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../markets/" title="Markets Overview" class="md-nav__link">
      Markets Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../one-sided-pay-as-offer/" title="One Sided Pay-As-Offer" class="md-nav__link">
      One Sided Pay-As-Offer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../two-sided-pay-as-bid/" title="Two Sided Pay-As-Bid" class="md-nav__link">
      Two Sided Pay-As-Bid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../two-sided-pay-as-clear/" title="Two Sided Pay-As-Clear" class="md-nav__link">
      Two Sided Pay-As-Clear
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../balancing-market/" title="Balancing Market" class="md-nav__link">
      Balancing Market
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../inter-area-agent/" title="Inter-Area Agent" class="md-nav__link">
      Inter-Area Agent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../market-slots-and-ticks/" title="Market Slots and Ticks" class="md-nav__link">
      Market Slots and Ticks
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-8" type="checkbox" id="nav-3-3-8" checked>
    
    <label class="md-nav__link" for="nav-3-3-8">
      Grid Fees
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-8">
        Grid Fees
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../constant-fees/" title="Constant fees" class="md-nav__link">
      Constant fees
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Percentage fees
      </label>
    
    <a href="./" title="Percentage fees" class="md-nav__link md-nav__link--active">
      Percentage fees
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuration-model" title="Configuration Model" class="md-nav__link">
    Configuration Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction-and-definitions" title="Introduction and definitions" class="md-nav__link">
    Introduction and definitions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#one-sided-pay-as-offer" title="One Sided Pay as Offer" class="md-nav__link">
    One Sided Pay as Offer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#two-sided-pay-as-bid" title="Two Sided Pay as Bid" class="md-nav__link">
    Two Sided Pay as Bid
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#two-sided-pay-as-clear" title="Two Sided Pay as Clear" class="md-nav__link">
    Two Sided Pay as Clear
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      D3A Blockchain Support
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        D3A Blockchain Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../d3a-blockchain-support/" title="D3A Blockchain Overview" class="md-nav__link">
      D3A Blockchain Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../clearingtoken-smart-contract/" title="ClearingToken Smart Contract" class="md-nav__link">
      ClearingToken Smart Contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../market-smart-contract/" title="Market Smart Contract" class="md-nav__link">
      Market Smart Contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../run-d3a-on-tobalaba/" title="Steps to Run D3A on Tobalaba" class="md-nav__link">
      Steps to Run D3A on Tobalaba
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Simulation Results
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Simulation Results
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../simulation-results/" title="Simulation Results Overview" class="md-nav__link">
      Simulation Results Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bills/" title="Bills" class="md-nav__link">
      Bills
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../alternative-pricing-schemes/" title="Alternative Pricing Schemes" class="md-nav__link">
      Alternative Pricing Schemes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configure-transfer-fee/" title="How to Configure Grid Transfer Fee" class="md-nav__link">
      How to Configure Grid Transfer Fee
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../simulation-events/" title="Simulation Events" class="md-nav__link">
      Simulation Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../create-setup-file/" title="How to Create a setup-file" class="md-nav__link">
      How to Create a setup-file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../change-global-sim-settings/" title="How to Change Global Simulation Settings" class="md-nav__link">
      How to Change Global Simulation Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../launch-sim-via-cli/" title="How to launch Simulation via Command Line Interface (CLI)" class="md-nav__link">
      How to launch Simulation via Command Line Interface (CLI)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-12" type="checkbox" id="nav-3-12">
    
    <label class="md-nav__link" for="nav-3-12">
      Installation Instructions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-12">
        Installation Instructions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation-instructions/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ios-installation-instructions/" title="Mac" class="md-nav__link">
      Mac
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installation-instructions-vm/" title="Virtual Machine" class="md-nav__link">
      Virtual Machine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../version-update/" title="Version Updates" class="md-nav__link">
      Version Updates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kpis/" title="Key Performance Indicators (KPIs)" class="md-nav__link">
      Key Performance Indicators (KPIs)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq-odyssey/" title="FAQ Odyssey hackathon" class="md-nav__link">
      FAQ Odyssey hackathon
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuration-model" title="Configuration Model" class="md-nav__link">
    Configuration Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction-and-definitions" title="Introduction and definitions" class="md-nav__link">
    Introduction and definitions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#one-sided-pay-as-offer" title="One Sided Pay as Offer" class="md-nav__link">
    One Sided Pay as Offer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#two-sided-pay-as-bid" title="Two Sided Pay as Bid" class="md-nav__link">
    Two Sided Pay as Bid
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#two-sided-pay-as-clear" title="Two Sided Pay as Clear" class="md-nav__link">
    Two Sided Pay as Clear
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/gridsingularity/d3a/wiki/edit/master/docs/percentage-fees.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Percentage fees</h1>
                
                <h3 id="configuration-model">Configuration Model<a class="headerlink" href="#configuration-model" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../img/grid-fee-1.jpg" style="display: block;margin-left: auto;margin-right: auto;" /></p>
<h3 id="introduction-and-definitions">Introduction and definitions<a class="headerlink" href="#introduction-and-definitions" title="Permanent link">&para;</a></h3>
<p>We will use the grid configuration example above to go into detail about how the grid fees in the D3A work. Grid fees can be configured as percentages or as euro cents (constant fees are not yet implemented). Please see how to configure the grid fee <a href="../configure-transfer-fee/">here</a>. Fees are configured based on the clearing price of the trade. </p>
<p>We have agreed that the buyer should pay all of the fees, at least for this implementation. Any fee that a seller has to pay is ultimately the burden of the buyer. A seller with additional operational costs or taxes will have to raise their prices in a competitive market.</p>
<p>The fees are typically configured as percentages or euro cents in order to map the D3A fees in a way similar to the energy fees found on a customer's energy bill in the traditional/legacy electricity system. For example, in Germany the federal network agency charges 24% of the total bill as usage fees. Additional fees are subtracted for: Renewable energy surcharge (21%), Sales Tax (16%), Electricity Tax (7%), Concession levy (5%), Offshore liability levy (1.3%), Surcharge for combined heat and power plants (0.1%) and Levy for industry rebate on grid fees (1%). See <a href="https://www.cleanenergywire.org/factsheets/what-german-households-pay-power">Clean Energy Wire</a> for more info. When running D3A simulations, we consider the current grid fees and propose which fees need to be added at which layers in the D3A. Configuring separate grid fees in separate markets or areas helps to accomplish this. The grid fee is a part of the energy trade price and is cumulative so that the fees in each market a trade passes through can be added cumulatively together to get the entire grid fee, often as a percentage of the clearing price. </p>
<p>The <strong>Clearing Price</strong> is the price that the market clears at.</p>
<p>The <strong>Trade Price</strong> is the price the buyer pays (revenue to the seller plus the grid fees).</p>
<p>As seen in the examples below, the price of a bid or offer changes as it is propagated into different markets. The price of an offer increases to account for the added fees of the market. This helps an agent submitting an offer to receive equal or greater revenue than the value of the offer. The price of a bid decreases for the same reason. This helps an agent submitting a bid to pay equal or less than the value of the bid. This way, an agent making an offer will never receive less than their offer and an agent making a bid will never pay more than the bid.</p>
<h3 id="one-sided-pay-as-offer">One Sided Pay as Offer<a class="headerlink" href="#one-sided-pay-as-offer" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../img/grid-fee-2.jpg" style="display: block;margin-left: auto;margin-right: auto;" /></p>
<p>In the One Sided Pay as Offer market, there are no bids and only offers exist. The offers are propagated throughout the markets in the hierarchy. The grid fees are taken into account when an offer is forwarded to the higher market, by the higher market itself. Therefore the agent is not responsible for adapting the offer price to include the grid fees. The grid fees' unit is a ratio of the original offer price, therefore the formula to calculate the new offer price when placing an offer to a market is the following:</p>
<div class="codehilite"><pre><span></span><code>offer_price_after_fees = offer_price + original_offer_price * grid_fee_ratio
</code></pre></div>


<p>If the offer is not purchased after one tick, it is moved into the next market. When entering a new market, the offer's price is increased according that that market's grid fee. The PV offer of € 0.10 is first placed into the House 2 Market where it gains zero fees. Then it moves into the Neighborhood 2 Market, gaining a fee of 5% of the original offer <code>0.10*0.05+0.10=0.105</code> to become € 0.105. Then if not purchased it moves into the Grid Market, gaining a fee of 10% of the original offer <code>0.10*0.10+0.105=0.115</code> to become € 0.115. Continuing into the Neighborhood 1 Market, the offer gains a fee of 5% <code>0.10*0.05+0.115=0.12</code> to become € 0.12. Continuing into the House 1 Market, the offer gains zero fees. The Load buys the offer in the House 1 Market at the Clearing Price of € 0.12. From the initial offer price, the total fees are calculated <code>0.10*(1+0.05+0.10+0.05)</code> to yield the Trade Price of € 0.12.</p>
<p><strong>The Load pays the Trade Price of € 0.12, which includes € 0.10 revenue to the PV, € 0.005 fees to Neighborhood Market 1, € 0.01 fees to Grid Market, and € 0.005 fees to Neighborhood Market 2.</strong></p>
<p>Since the market is pay-as-offer, the offer prices are used as 'clearing' prices. On each market trade, the grid fee is calculated based on the original offer price (according to the accepted energy to cover partial trades) and subtracted from the offer price, in order to calculate the trade price after fees. However, the trade price includes the grid fees. The following formula is used: </p>
<div class="codehilite"><pre><span></span><code>market_fees = grid_fee_ratio * original_price * energy_portion
trade_price_after_fees = energy * trade_rate - market_fees
trade_price = energy * trade_rate
</code></pre></div>


<h3 id="two-sided-pay-as-bid">Two Sided Pay as Bid<a class="headerlink" href="#two-sided-pay-as-bid" title="Permanent link">&para;</a></h3>
<p><img alt="img" src="../img/grid-fee-3.jpg" style="display: block;margin-left: auto;margin-right: auto;" /></p>
<p>In the Two Sided Pay as Bid market, there are both bids and offers, which are both propagated throughout the markets in the hierarchy. If a bid or offer is not purchased after one tick, it is moved into the next market. In order to prevent the double accounting of a market's grid fee when a bid and an offer are matched in that market, market fees are added to offers when they enter that market (<strong>target market</strong>) and market fees are subtracted from bids when they leave that market and enter the another one (<strong>source market</strong>). The formula for propagating the offers is exactly the same as on the one-sided market :</p>
<div class="codehilite"><pre><span></span><code>offer_price_after_fees = offer_price + original_offer_price * grid_fee_ratio
</code></pre></div>


<p>The bids are not adapted by the market itself, but the area/IAA is responsible to subtract the fees from the bid before propagating the bid to the higher market. As mentioned above, the difference in behavior compared to offers is to avoid double accounting of the grid fee on one market. The formula for an area to update the bid to include grid fees is the following:</p>
<div class="codehilite"><pre><span></span><code>bid_price_after_fees = bid_price - original_bid_price * grid_fee_ratio
</code></pre></div>


<p>In the case of the Two Sided Pay as Bid market, the offer has moved into the Grid Market by the same mechanism as explained in the One Sided Pay as Offer market. The bid of € 0.30 follows a similar mechanism and is placed into the House 1 Market where there are zero fees. If the bid is not purchased after one tick, it is moved into the Neighborhood 1 Market. As explained above, only the fees from the source market are added, which are zero in this case. So the bid remains at € 0.30. Next the bid moves into the Grid Market, where it its value is lowered according to the fees of its source market, the Neighborhood 1 Market at 5%. With the Neighborhood 1 Market fee, the bid is lowered to <code>0.30-0.30*0.05=0.285</code> € 0.285 as it enters the Grid Market.</p>
<p>In the example above, the bid and offer are matched in the Grid Market. However, when the offer entered the Grid Market, its price was immediately updated to account for the Grid Market's fees <code>0.10*0.10+0.105=0.115</code>. The bid on the other hand did not add the 10% fee. In the case that the bid was not matched in the Grid Market and moved into the Neighborhood 2 Market, the 10% fee from the Grid Market would be added. In this case the bid would become <code>0.285-0.30*0.10=0.255</code> € 0.255. The fees from the Neighborhood 2 Market would not be added to the bid unless it entered the House 2 Market (fees added according to the source market).</p>
<p>In the Grid Market, the Load bid is listed as € 0.285 and the PV offer is listed as € 0.115. As the bid is greater than the offer a trade can be scheduled. The trade clears at the bid price, giving a Clearing Price of € 0.285.</p>
<p>There is a separate algorithm that calculates the grid fee according to the clearing price. This allows the markets to act more independently and in a decentralized manner, without having to share information regarding their fees with other markets. In order to calculate the fee correctly based on the original price, the algorithm needs to be able to calculate the supply side and demand side tax. It is easy to calculate this, since the original bid/offer prices are available:</p>
<div class="codehilite"><pre><span></span><code>demand_side_tax = 1 - (forwarded_bid_rate / original_bid_rate)
supply_side_tax = (forwarded_offer_rate / original_offer_rate) - 1
</code></pre></div>


<p>For the example, we have the following values: <code>supply_side_tax=(0.115/0.1)-1=0.15</code>, <code>demand_side_tax=1-(0.285/0.3)=0.05</code>.</p>
<p>After calculating the supply and demand side tax, we can calculate the revenue of the trade. Note the original_trade_rate is the amount that the original buyer (in our case the Load) will need to pay, therefore for pay as bid this is the original bid price. The calculation is the following: </p>
<div class="codehilite"><pre><span></span><code>total_tax_ratio = supply_side_tax + demand_side_tax
revenue = original_trade_rate / (1 + total_tax_ratio)
</code></pre></div>


<p>For the example, the revenue will be: <code>revenue = 0.30/(1+0.15+0.05)=0.25</code></p>
<p>The grid fees are then calculated based on the revenue and the individual market fees.</p>
<div class="codehilite"><pre><span></span><code>fees = revenue * grid_fee_ratio
</code></pre></div>


<p>For the case of the Grid Market in our example, the fees are <code>0.25*0.1=0.025</code>, and for each Neighborhood market, the fees are <code>0.25*0.05=0.0125</code>. </p>
<p>Finally, the trade rate is adapted according to the supply side tax, in order to include the fees of the current market: </p>
<div class="codehilite"><pre><span></span><code>trade_rate = revenue * (1 + supply_side_tax)
trade_price = energy * trade_rate
</code></pre></div>


<p>For our example, the trade price for each market is: </p>
<div class="codehilite"><pre><span></span><code>Grid Market = 0.25 * (1 + 0.15) = 0.2875
Neighborhood 2 Market = 0.25 * (1 + 0.05) = 0.2625 
Neighborhood 1 Market = 0.25 * (1 + 0.2) = 0.3
House 1 Market = 0.25 * (1 + 0.2) = 0.3
House 2 Market = 0.25 * (1 + 0) = 0.25
</code></pre></div>


<p><strong>The Load pays the Trade Price of € 0.30, which includes € 0.25 revenue to the PV, € 0.0125 fees to Neighborhood Market 1, € 0.025 fees to Grid Market, and € 0.0125 fees to Neighborhood Market 2.</strong></p>
<h3 id="two-sided-pay-as-clear">Two Sided Pay as Clear<a class="headerlink" href="#two-sided-pay-as-clear" title="Permanent link">&para;</a></h3>
<p>In construction...</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../constant-fees/" title="Constant fees" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Constant fees
              </span>
            </div>
          </a>
        
        
          <a href="../d3a-blockchain-support/" title="D3A Blockchain Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                D3A Blockchain Overview
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-logo">
        <img src="../img/d3a-logo.png" height="50"/>
      </div>
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/gridsingularity" class="md-footer-social__link fa fa-lg fa-github"></a>
    
      <a href="https://twitter.com/gridsingularity" class="md-footer-social__link fa fa-lg fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/grid-singularity" class="md-footer-social__link fa fa-lg fa-linkedin"></a>
    
      <a href="https://join.slack.com/t/gsycommunity/shared_invite/zt-dpfxe2gk-hKFccsrr68g982odCJlrIg" class="md-footer-social__link fa fa-lg fa-slack"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.05d1c8d6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="https://research.web3.foundation/en/latest/mathjax-config.js"></script>
      
        <script src="../search/main.js"></script>
      
    
  </body>
</html>