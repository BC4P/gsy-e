



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Wiki for the D3A by Grid Singularity">
      
      
        <link rel="canonical" href="https://gridsingularity.github.io/d3a/d3a-documentation/constant-fees/">
      
      
        <meta name="author" content="Grid Singularity">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/d3a-favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.2">
    
    
      
        <title>Constant Grid Fee Calculation - Grid Singularity D3A Wiki</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.982221ab.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"PT Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#example-calculation-in-one-sided-pay-as-offer-market" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://gridsingularity.github.io/d3a/d3a-documentation" title="Grid Singularity D3A Wiki" class="md-header-nav__button md-logo">
          
            <img src="../img/d3a-logo.png" width="32" height="32">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Grid Singularity D3A Wiki
            </span>
            <span class="md-header-nav__topic">
              Constant Grid Fee Calculation
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/gridsingularity/d3a/wiki/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    D3A on github
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://gridsingularity.github.io/d3a/d3a-documentation" title="Grid Singularity D3A Wiki" class="md-nav__button md-logo">
      
        <img src="../img/d3a-logo.png" width="48" height="48">
      
    </a>
    Grid Singularity D3A Wiki
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/gridsingularity/d3a/wiki/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    D3A on github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      General Overview
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        General Overview
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../d3a-documentation/" title="Energy Market Design Challenge" class="md-nav__link">
      Energy Market Design Challenge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vision/" title="Grid Singularity Vision" class="md-nav__link">
      Grid Singularity Vision
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../technical-approach/" title="Grid Singularity Technical Approach" class="md-nav__link">
      Grid Singularity Technical Approach
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../licensing/" title="Licensing and Open Source Ethos" class="md-nav__link">
      Licensing and Open Source Ethos
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Market Mechanism
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Market Mechanism
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../markets/" title="Market Types: Spot, Balancing, and Futures" class="md-nav__link">
      Market Types: Spot, Balancing, and Futures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../inter-area-agent/" title="Bids/Offers Process and Hierarchical Market Structure" class="md-nav__link">
      Bids/Offers Process and Hierarchical Market Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../default-trading-strategy/" title="Trading Strategies" class="md-nav__link">
      Trading Strategies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Clearing Mechanisms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Clearing Mechanisms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../clearing-purpose/" title="Clearing Mechanism Types" class="md-nav__link">
      Clearing Mechanism Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../one-sided-pay-as-offer/" title="One-Sided Pay-as-Offer Market" class="md-nav__link">
      One-Sided Pay-as-Offer Market
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../two-sided-pay-as-bid/" title="Two-Sided Pay-as-Bid Market" class="md-nav__link">
      Two-Sided Pay-as-Bid Market
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../two-sided-pay-as-clear/" title="Two-Sided Pay-as-Clear Market" class="md-nav__link">
      Two-Sided Pay-as-Clear Market
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5" checked>
    
    <label class="md-nav__link" for="nav-2-5">
      Grid Fee Accounting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-5">
        Grid Fee Accounting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../grid-fees/" title="Grid Fee Objectives" class="md-nav__link">
      Grid Fee Objectives
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Constant Grid Fee Calculation
      </label>
    
    <a href="./" title="Constant Grid Fee Calculation" class="md-nav__link md-nav__link--active">
      Constant Grid Fee Calculation
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example-calculation-in-one-sided-pay-as-offer-market" title="Example Calculation in One-Sided Pay-as-Offer Market" class="md-nav__link">
    Example Calculation in One-Sided Pay-as-Offer Market
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-calculation-in-two-sided-pay-as-bid-market" title="Example Calculation in Two-Sided Pay-as-Bid Market" class="md-nav__link">
    Example Calculation in Two-Sided Pay-as-Bid Market
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-calculation-in-two-sided-pay-as-clear-market" title="Example Calculation in Two-Sided Pay-as-Clear Market" class="md-nav__link">
    Example Calculation in Two-Sided Pay-as-Clear Market
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../percentage-fees/" title="Percentage Grid Fee Calculation" class="md-nav__link">
      Percentage Grid Fee Calculation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      Balancing Market
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        Balancing Market
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../balancing-market/" title="Balancing Market Structure" class="md-nav__link">
      Balancing Market Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../balancing-implementation/" title="Balancing Market Implementation" class="md-nav__link">
      Balancing Market Implementation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Interfaces
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Interfaces
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      APIs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        APIs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api-overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../assets-api/" title="Asset API" class="md-nav__link">
      Asset API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../grid-operator-api/" title="Grid Operator API" class="md-nav__link">
      Grid Operator API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../collaboration/" title="Collaboration Tool" class="md-nav__link">
      Collaboration Tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../canary-network/" title="Canary Test Network" class="md-nav__link">
      Canary Test Network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blockchain/" title="Blockchain Integration" class="md-nav__link">
      Blockchain Integration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Configuration general settings and installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Configuration general settings and installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../general-settings/" title="General Configuration Settings" class="md-nav__link">
      General Configuration Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Backend Installation Instructions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Backend Installation Instructions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../linux-installation-instructions/" title="Linux Installation Instructions" class="md-nav__link">
      Linux Installation Instructions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ios-installation-instructions/" title="Mac Installation Instructions" class="md-nav__link">
      Mac Installation Instructions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vm-installation-instructions/" title="Virtual Machine Installation Instructions" class="md-nav__link">
      Virtual Machine Installation Instructions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../version-update/" title="Version Updates" class="md-nav__link">
      Version Updates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Modelling
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Modelling
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ui-initialisation/" title="Setting up a simulation in the User Interface" class="md-nav__link">
      Setting up a simulation in the User Interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../model-markets/" title="Market Settings" class="md-nav__link">
      Market Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-3" type="checkbox" id="nav-4-3-3">
    
    <label class="md-nav__link" for="nav-4-3-3">
      Energy Assets Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-3">
        Energy Assets Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../model-market-maker/" title="Market Maker and Infinite Bus" class="md-nav__link">
      Market Maker and Infinite Bus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../model-load/" title="Load" class="md-nav__link">
      Load
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../model-pv/" title="PV" class="md-nav__link">
      PV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../model-storage/" title="Storage" class="md-nav__link">
      Storage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../model-power-plant/" title="Power Plant" class="md-nav__link">
      Power Plant
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../map/" title="Map" class="md-nav__link">
      Map
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upload-file-formats/" title="File Upload Format" class="md-nav__link">
      File Upload Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../library/" title="Asset and Data Library" class="md-nav__link">
      Asset and Data Library
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../events/" title="Events (adding assets, communities, etc.)" class="md-nav__link">
      Events (adding assets, communities, etc.)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Results and Analysis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Results and Analysis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../results/" title="Results Dashboard" class="md-nav__link">
      Results Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5-2" type="checkbox" id="nav-4-5-2">
    
    <label class="md-nav__link" for="nav-4-5-2">
      Key Performance Indicators (KPIs)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-5-2">
        Key Performance Indicators (KPIs)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../self-sufficiency-consumption/" title="Self-Sufficiency and Self-Consumption" class="md-nav__link">
      Self-Sufficiency and Self-Consumption
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../peak-percentage/" title="Peak Percentage" class="md-nav__link">
      Peak Percentage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../energy-bills/" title="Energy Bill" class="md-nav__link">
      Energy Bill
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data-download/" title="Data Download" class="md-nav__link">
      Data Download
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../references/" title="References" class="md-nav__link">
      References
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../releases/" title="Releases Archive" class="md-nav__link">
      Releases Archive
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example-calculation-in-one-sided-pay-as-offer-market" title="Example Calculation in One-Sided Pay-as-Offer Market" class="md-nav__link">
    Example Calculation in One-Sided Pay-as-Offer Market
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-calculation-in-two-sided-pay-as-bid-market" title="Example Calculation in Two-Sided Pay-as-Bid Market" class="md-nav__link">
    Example Calculation in Two-Sided Pay-as-Bid Market
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-calculation-in-two-sided-pay-as-clear-market" title="Example Calculation in Two-Sided Pay-as-Clear Market" class="md-nav__link">
    Example Calculation in Two-Sided Pay-as-Clear Market
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/gridsingularity/d3a/wiki/edit/master/docs/constant-fees.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Constant Grid Fee Calculation</h1>
                
                <p>The constant grid fee is a market based fee, defined in <strong>€/kWh</strong> and added to each trade that is cleared, as shown in the figure below.</p>
<p><img alt="alt_text" src="../img/grid-fee-constant-1.png" /></p>
<p>The rate of a bid or offer changes as that bid or offer is propagated into different <a href="../model-markets/">markets</a>. The offer rate increases to account for the added fees for the relevant market, ensuring that the seller receives a revenue equal or greater than the original offer. The bid rate decreases for the same reason. </p>
<h2 id="example-calculation-in-one-sided-pay-as-offer-market">Example Calculation in One-Sided Pay-as-Offer Market<a class="headerlink" href="#example-calculation-in-one-sided-pay-as-offer-market" title="Permanent link">&para;</a></h2>
<p><img alt="alt_text" src="../img/grid-fee-constant-2.png" /></p>
<p>In an <a href="../one-sided-pay-as-offer/">One-Sided Pay-as-Offer</a> market, there are no bids, only offers. Offers are propagated throughout the markets in the hierarchy shown in the figure above. Grid fees are accounted for when an offer is forwarded to the higher market, adding that market’s grid fees to any previously accumulated fees. The formula to calculate the new offer rate when placing an offer to a higher market is the following:</p>
<div class="codehilite"><pre><span></span><code>offer_rate_after_fees (€/kWh) = offer_rate (€/kWh) + grid_fee (€/kWh)
</code></pre></div>

<p>If the offer is not purchased after two <a href="../markets/#market-ticks">ticks</a>, it is moved into the next market, with the total rate incremented by the amount of that market's grid fee. In the example above, the PV offer of 0.10 €/kWh is first placed into the House 2 Market where it gains zero fees. Then it moves into the Neighborhood 2 Market, gaining a fee of 0.01 €/kWh to become 0.11 €/kWh. Then, if not purchased, it moves into the Grid Market, gaining a fee of 0.02 €/kWh to become 0.13 €/kWh. Continuing into the Neighborhood 1 Market, the offer gains a fee of 0.01 €/kWh to become 0.14 €/kWh. Continuing into the House 1 Market, the offer gains zero fees. The Load ultimately buys the offer in the House 1 Market at the Clearing Rate of 0.14 €/kWh.</p>
<p>The trade price is calculated by adding the original offer rate (<code>0.10 €/kWh</code>) and the total fees (<code>(0.01+0.02+0.01) = 0.04 €/kWh</code>), then multiplying by the amount of energy traded (<code>1 kWh</code>) to yield the Trade Price of 0.14€.</p>
<p>The Load pays the Trade Price of 0.14€, which includes 0.10€ revenue for the PV, 0.01€ fees for the Neighborhood Market 1, 0.02€ fees for the Grid Market, and 0.01€ fees for the Neighborhood Market 2.</p>
<p>Since the market type is pay-as-offer, the offer rate is used as the clearing rate. The grid fees are added to the offer rate to determine the trade rate and therefore the trade price in each market. The following formula is used:</p>
<div class="codehilite"><pre><span></span><code>supply_side_fee (€/kWh) = forwarded_offer_rate (€/kWh) - original_offer_rate (€/kWh)
trade_rate (€/kWh) = clearing rate (€/kWh)
trade_price (€) = energy (kWh) * trade_rate (€/kWh)
</code></pre></div>

<p>For the provided example, the trade price for each market is:</p>
<div class="codehilite"><pre><span></span><code>Market_trade_price (€) = (original_offer_rate (€/kWh) + supply_side_fee (€/kWh)) * energy (kWh)

Grid Market = (0.10 + 0.03)*1 = 0.13
Neighborhood 2 Market = (0.10 + 0.01)*1 = 0.11
Neighborhood 1 Market = (0.10 + 0.04)*1 = 0.14
House 1 Market = (0.10 + 0.04)*1 = 0.14
House 2 Market = (0.10 + 0)*1 = 0.10
</code></pre></div>

<h2 id="example-calculation-in-two-sided-pay-as-bid-market">Example Calculation in Two-Sided Pay-as-Bid Market<a class="headerlink" href="#example-calculation-in-two-sided-pay-as-bid-market" title="Permanent link">&para;</a></h2>
<p><img alt="alt_text" src="../img/grid-fee-constant-3.png" /></p>
<p>In the <a href="../two-sided-pay-as-bid/">Two-Sided Pay-as-Bid</a> market, there are both bids and offers, and both are propagated through the markets in the hierarchy. If a bid or offer is not matched after two <a href="../markets/#market-ticks">ticks</a>, it is moved into the next market. In order to prevent the double accounting of a market's grid fee when a bid and an offer are matched in that market, market fees are added to offers when they enter a new market (target market), and they are subtracted from bids when they leave a market (source market) and enter another one. The formula for propagating the offers is the same as for the one-sided market :</p>
<div class="codehilite"><pre><span></span><code>offer_rate_after_fees (€/kWh) = offer_rate (€/kWh) + grid_fee (€/kWh)
</code></pre></div>

<p>The IAA subtracts the fees from the bid before propagating the bid to the higher market, based on the following formula: </p>
<div class="codehilite"><pre><span></span><code>bid_rate_after_fees (€/kWh) = bid_rate (€/kWh) - grid_fee (€/kWh)
</code></pre></div>

<p>In the case of a Two-Sided Pay-as-Bid market, the offer is moved into the Grid Market by the same mechanism as in the One-Sided Pay-as-Offer market. The bid of 0.30 €/kWh is placed into the House 1 Market where there are zero fees. If it is not purchased after two ticks, it is moved into the Neighborhood 1 Market. As explained above, only the fees from the source market are added, which are zero in this case. Hence the bid rate remains 0.30 €/kWh. Next, the bid is moved into the Grid Market, where its value is reduced by the amount of the fees of its source market, the Neighborhood 1 Market at 0.01 €/kWh, resulting in a rate of 0.29 €/kWh as it enters the Grid Market.</p>
<p>In the example above, the bid and offer are matched in the Grid Market. When the offer entered the Grid Market, its rate was immediately updated to account for the Grid Market fees (0.11 + 0.02). The bid was not updated, and if it  was not matched in the Grid Market and moved to the Neighborhood 2 Market, the 0.02 €/kWh fee from the Grid Market would be subtracted to become (0.29 - 0.02) 0.27 €/kWh. The fees from the Neighborhood 2 Market would not be added to the bid unless it entered the House 2 Market (fees added according to the source market).</p>
<p>In the Grid Market, the Load bid rate is listed as 0.29 €/kWh and the PV offer as 0.13 €/kWh. As the bid’s rate is greater than the offer’s rate, a trade can be scheduled. The trade clears at the bid’s rate, resulting in a Clearing Rate of 0.29 €/kWh.</p>
<p>The Grid Singularity energy exchange engine includes an algorithm that calculates the grid fee according to the clearing rate, basing the calculation on the original bid and offer rates. This allows the markets to act more independently and in a decentralized manner, without having to share information regarding their fees with other markets. The algorithm formula is as follows:</p>
<div class="codehilite"><pre><span></span><code>demand_side_fee (€/kWh) = original_bid_rate (€/kWh) - forwarded_bid_rate (€/kWh)
supply_side_fee (€/kWh) = forwarded_offer_rate (€/kWh) - original_offer_rate (€/kWh)
</code></pre></div>

<p>For the example, we have the following values: </p>
<div class="codehilite"><pre><span></span><code>supply_side_fee = 0.13 - 0.10 = 0.03 €/kWh
demand_side_fee = 0.30 - 0.29 = 0.01 €/kWh
</code></pre></div>

<p>After calculating the supply and demand side fee, the trade revenue can be calculated. Note the original_trade_rate is the amount that the original buyer (in our case the Load) will need to pay, therefore in the Pay-as-Bid market type this is the original bid price. The formula is the following:</p>
<div class="codehilite"><pre><span></span><code>total_fee (€/kWh) = supply_side_fee (€/kWh) + demand_side_fee (€/kWh)
revenue_rate (€/kWh) = original_trade_rate (€/kWh) - total_fee (€/kWh)
</code></pre></div>

<p>For the example, the revenue will be: revenue = 0.30 - 0.04 = 0.26 €/kWh</p>
<p>Finally, the trade rate is adapted according to the supply side fee, in order to include the fees of the current market:</p>
<div class="codehilite"><pre><span></span><code>trade_rate (€/kWh) = revenue_rate (€/kWh) + supply_side_fee (€/kWh)
trade_price (€) = energy (kWh) * trade_rate (€/kWh)
</code></pre></div>

<p>For our example, the trade price for each market is:</p>
<div class="codehilite"><pre><span></span><code>Market_trade_price (€) = (revenue_rate (€/kWh) + supply_side_fee (€/kWh)) * energy (kWh)

Grid Market = (0.26 + 0.03)*1 = 0.29,
Neighborhood 2 Market = (0.26 + 0.01)*1 = 0.27,
Neighborhood 1 Market = (0.26 + 0.04)*1 = 0.30,
House 1 Market = (0.26 + 0.04)*1 = 0.30,
House 2 Market = (0.26 + 0)*1 = 0.26.
</code></pre></div>

<p>The Load pays the Trade Price of 0.30€, which includes 0.26€ revenue for the PV, 0.01€ fees for Neighborhood Market 1, 0.02€ fees for the Grid Market, and 0.01€ fees for the Neighborhood Market 2.</p>
<h2 id="example-calculation-in-two-sided-pay-as-clear-market">Example Calculation in Two-Sided Pay-as-Clear Market<a class="headerlink" href="#example-calculation-in-two-sided-pay-as-clear-market" title="Permanent link">&para;</a></h2>
<p>This market clearing type is currently in development. We welcome your suggestions on its design!</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../grid-fees/" title="Grid Fee Objectives" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Grid Fee Objectives
              </span>
            </div>
          </a>
        
        
          <a href="../percentage-fees/" title="Percentage Grid Fee Calculation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Percentage Grid Fee Calculation
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-logo">
        <img src="../img/d3a-logo.png" height="50"/>
      </div>
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/gridsingularity" class="md-footer-social__link fa fa-lg fa-github"></a>
    
      <a href="https://twitter.com/gridsingularity" class="md-footer-social__link fa fa-lg fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/grid-singularity" class="md-footer-social__link fa fa-lg fa-linkedin"></a>
    
      <a href="https://join.slack.com/t/gsycommunity/shared_invite/zt-dpfxe2gk-hKFccsrr68g982odCJlrIg" class="md-footer-social__link fa fa-lg fa-slack"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.05d1c8d6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="https://research.web3.foundation/en/latest/mathjax-config.js"></script>
      
    
  </body>
</html>